<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Squidstat Library API: Manual Experiments</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Admiral_Instruments_Logo.webp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Squidstat Library API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('manual_exp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Manual Experiments </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>We have seen before the <a class="el" href="basics.html">basics</a> of running experiments. We created our custom experiment using prebuilt elements. These elements have presets for controlling the voltage and current. You can still do that yourself in real time, if you wish to do so, using manual experiments. With a manual experiment, you have the option of running in galvanostatic mode -where you can control the current- or potentiostatic mode where you can control the voltage.</p>
<p>First, we do environment setup as usual:</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span>** test = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="keywordtype">int</span> args;</div>
<div class="line">QCoreApplication app(args, test);</div>
</div><!-- fragment --><p>Since we are doing a manual experiment, we will not create a custom experiment but jump to creating the logic. The following is a simple logic:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> createLogic = [=] (<span class="keyword">const</span> <a class="code" href="class_ais_instrument_handler.html">AisInstrumentHandler</a>* handler) {</div>
<div class="line">    QObject::connect(handler, &amp;<a class="code" href="class_ais_instrument_handler.html#a3de1ee62bac5796ef2d4e24dfb75eebf">AisInstrumentHandler::activeDCDataReady</a>,  [=](uint8_t channel, <span class="keyword">const</span> <a class="code" href="struct_ais_d_c_data.html">AisDCData</a>&amp; data) {</div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;channel : &quot;</span> &lt;&lt; channel &lt;&lt;<span class="stringliteral">&quot; current :&quot;</span> &lt;&lt; data.<a class="code" href="struct_ais_d_c_data.html#a8dbf057e272af392efcfdc6343eb1db5">current</a> &lt;&lt; <span class="stringliteral">&quot;   voltage: &quot;</span> &lt;&lt; data.<a class="code" href="struct_ais_d_c_data.html#ad49c1bb5b6e60fe631e174f64f40afbe">workingElectrodeVoltage</a></div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;   counter electrode : &quot;</span> &lt;&lt; data.<a class="code" href="struct_ais_d_c_data.html#a6c765ec62a21cddb6482eebf64e5c812">counterElectrodeVoltage</a> &lt;&lt; <span class="stringliteral">&quot;  time-stamp : &quot;</span> &lt;&lt; data.<a class="code" href="struct_ais_d_c_data.html#ae394dc60504aa5fdbc06604265d71881">timestamp</a>;</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    QObject::connect(handler, &amp;<a class="code" href="class_ais_instrument_handler.html#a2f319978ea32fc5cf0c5282857bfa405">AisInstrumentHandler::activeACDataReady</a>, [=](uint8_t channel, <span class="keyword">const</span> <a class="code" href="struct_ais_a_c_data.html">AisACData</a>&amp; data) {</div>
<div class="line">        qDebug() &lt;&lt; data.<a class="code" href="struct_ais_a_c_data.html#ac6b51ee0dfd56a5ad9f919a6c325aa4f">frequency</a> &lt;&lt; <span class="stringliteral">&quot;         &quot;</span> &lt;&lt; data.<a class="code" href="struct_ais_a_c_data.html#aa7f020bc2d02d3bd63880f4290dc82b2">absoluteImpedance</a> &lt;&lt; <span class="stringliteral">&quot;        &quot;</span> &lt;&lt; data.<a class="code" href="struct_ais_a_c_data.html#af1eb5d7ed33b0e383bb966548c82c640">phaseAngle</a>;</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    QObject::connect(handler, &amp;<a class="code" href="class_ais_instrument_handler.html#a9d0df19029d26b1cce0d05650ecfa854">AisInstrumentHandler::experimentNewElementStarting</a>, [=](uint8_t channel, <span class="keyword">const</span> <a class="code" href="struct_ais_experiment_node.html">AisExperimentNode</a>&amp;) {</div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;New Node beginning &quot;</span>;</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    QObject::connect(handler, &amp;<a class="code" href="class_ais_instrument_handler.html#a391573a96037abefe0004b4a19c05bd3">AisInstrumentHandler::experimentStopped</a>,  [=](uint8_t channel) {</div>
<div class="line">        qDebug() &lt;&lt; <span class="stringliteral">&quot;Experiment Completed Signal &quot;</span> &lt;&lt; channel;</div>
<div class="line">    });</div>
<div class="line">};</div>
<div class="ttc" id="aclass_ais_instrument_handler_html"><div class="ttname"><a href="class_ais_instrument_handler.html">AisInstrumentHandler</a></div><div class="ttdoc">this class provides control of the device including starting, pausing, resuming and stopping an exper...</div><div class="ttdef"><b>Definition:</b> AisInstrumentHandler.h:28</div></div>
<div class="ttc" id="aclass_ais_instrument_handler_html_a2f319978ea32fc5cf0c5282857bfa405"><div class="ttname"><a href="class_ais_instrument_handler.html#a2f319978ea32fc5cf0c5282857bfa405">AisInstrumentHandler::activeACDataReady</a></div><div class="ttdeci">void activeACDataReady(uint8_t channel, const AisACData &amp;ACData)</div><div class="ttdoc">a signal that is emitted whenever new AC data for an active experiment are ready.</div></div>
<div class="ttc" id="aclass_ais_instrument_handler_html_a391573a96037abefe0004b4a19c05bd3"><div class="ttname"><a href="class_ais_instrument_handler.html#a391573a96037abefe0004b4a19c05bd3">AisInstrumentHandler::experimentStopped</a></div><div class="ttdeci">void experimentStopped(uint8_t channel)</div><div class="ttdoc">a signal that is emitted whenever an experiment was stopped manually or has completed.</div></div>
<div class="ttc" id="aclass_ais_instrument_handler_html_a3de1ee62bac5796ef2d4e24dfb75eebf"><div class="ttname"><a href="class_ais_instrument_handler.html#a3de1ee62bac5796ef2d4e24dfb75eebf">AisInstrumentHandler::activeDCDataReady</a></div><div class="ttdeci">void activeDCDataReady(uint8_t channel, const AisDCData &amp;DCData)</div><div class="ttdoc">a signal that is emitted whenever new DC data for an active experiment are ready.</div></div>
<div class="ttc" id="aclass_ais_instrument_handler_html_a9d0df19029d26b1cce0d05650ecfa854"><div class="ttname"><a href="class_ais_instrument_handler.html#a9d0df19029d26b1cce0d05650ecfa854">AisInstrumentHandler::experimentNewElementStarting</a></div><div class="ttdeci">void experimentNewElementStarting(uint8_t channel, const AisExperimentNode &amp;stepInfo)</div><div class="ttdoc">a signal that is emitted whenever a new elemental experiment has started.</div></div>
<div class="ttc" id="astruct_ais_a_c_data_html"><div class="ttname"><a href="struct_ais_a_c_data.html">AisACData</a></div><div class="ttdoc">a structure containing AC data information.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:38</div></div>
<div class="ttc" id="astruct_ais_a_c_data_html_aa7f020bc2d02d3bd63880f4290dc82b2"><div class="ttname"><a href="struct_ais_a_c_data.html#aa7f020bc2d02d3bd63880f4290dc82b2">AisACData::absoluteImpedance</a></div><div class="ttdeci">double absoluteImpedance</div><div class="ttdoc">the magnitude of the complex impedance.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:53</div></div>
<div class="ttc" id="astruct_ais_a_c_data_html_ac6b51ee0dfd56a5ad9f919a6c325aa4f"><div class="ttname"><a href="struct_ais_a_c_data.html#ac6b51ee0dfd56a5ad9f919a6c325aa4f">AisACData::frequency</a></div><div class="ttdeci">double frequency</div><div class="ttdoc">the applied frequency in Hz.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:48</div></div>
<div class="ttc" id="astruct_ais_a_c_data_html_af1eb5d7ed33b0e383bb966548c82c640"><div class="ttname"><a href="struct_ais_a_c_data.html#af1eb5d7ed33b0e383bb966548c82c640">AisACData::phaseAngle</a></div><div class="ttdeci">double phaseAngle</div><div class="ttdoc">the phase angle between the real and the imaginary parts of the impedance.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:68</div></div>
<div class="ttc" id="astruct_ais_d_c_data_html"><div class="ttname"><a href="struct_ais_d_c_data.html">AisDCData</a></div><div class="ttdoc">a structure containing DC data information.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:7</div></div>
<div class="ttc" id="astruct_ais_d_c_data_html_a6c765ec62a21cddb6482eebf64e5c812"><div class="ttname"><a href="struct_ais_d_c_data.html#a6c765ec62a21cddb6482eebf64e5c812">AisDCData::counterElectrodeVoltage</a></div><div class="ttdeci">double counterElectrodeVoltage</div><div class="ttdoc">the measured counter electrode voltage in volts.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:22</div></div>
<div class="ttc" id="astruct_ais_d_c_data_html_a8dbf057e272af392efcfdc6343eb1db5"><div class="ttname"><a href="struct_ais_d_c_data.html#a8dbf057e272af392efcfdc6343eb1db5">AisDCData::current</a></div><div class="ttdeci">double current</div><div class="ttdoc">the measured electric current value in Amps</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:27</div></div>
<div class="ttc" id="astruct_ais_d_c_data_html_ad49c1bb5b6e60fe631e174f64f40afbe"><div class="ttname"><a href="struct_ais_d_c_data.html#ad49c1bb5b6e60fe631e174f64f40afbe">AisDCData::workingElectrodeVoltage</a></div><div class="ttdeci">double workingElectrodeVoltage</div><div class="ttdoc">the measured working electrode voltage in volts.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:17</div></div>
<div class="ttc" id="astruct_ais_d_c_data_html_ae394dc60504aa5fdbc06604265d71881"><div class="ttname"><a href="struct_ais_d_c_data.html#ae394dc60504aa5fdbc06604265d71881">AisDCData::timestamp</a></div><div class="ttdeci">double timestamp</div><div class="ttdoc">the time at which the DC data arrived.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:12</div></div>
<div class="ttc" id="astruct_ais_experiment_node_html"><div class="ttname"><a href="struct_ais_experiment_node.html">AisExperimentNode</a></div><div class="ttdoc">a structure containing some information regarding the running element.</div><div class="ttdef"><b>Definition:</b> AisDataPoints.h:107</div></div>
</div><!-- fragment --><p>You can see more advanced logic in in the <a class="el" href="control_flow_demo.html">Advanced Control Flow</a>.</p>
<p>Next, we will start the manual experiment after getting the handler:</p>
<div class="fragment"><div class="line">QObject::connect(tracker, &amp;<a class="code" href="class_ais_device_tracker.html#af0985ed0e0e7ba1b5168767720a5f0ff">AisDeviceTracker::newDeviceConnected</a>, &amp;app, [=](<span class="keyword">const</span> QString&amp; deviceName) {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span>&amp; handler = tracker-&gt;getInstrumentHandler(deviceName); <span class="comment">// get an instrument handler once the device is connected</span></div>
<div class="line">    createLogic(&amp;handler); <span class="comment">// assign the previously created logic to the handler.</span></div>
<div class="line"> </div>
<div class="line">    handler.startManualExperiment(1); <span class="comment">// start a manual experiment on channel 1</span></div>
<div class="line">    handler.setManualModeSamplingInterval(1, 2); <span class="comment">// set manual experiment sampling interval on channel 1 to be 2 seconds</span></div>
<div class="line">    handler.setManualModeConstantVoltage(1, 2); <span class="comment">// on channel 1, set constant 2V</span></div>
<div class="line"> </div>
<div class="line">});</div>
<div class="ttc" id="aclass_ais_device_tracker_html_af0985ed0e0e7ba1b5168767720a5f0ff"><div class="ttname"><a href="class_ais_device_tracker.html#af0985ed0e0e7ba1b5168767720a5f0ff">AisDeviceTracker::newDeviceConnected</a></div><div class="ttdeci">void newDeviceConnected(const QString &amp;deviceName)</div><div class="ttdoc">a signal to be emitted whenever a new connection has been successfully established with a device.</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Unlike when creating elements, you set the parameters after starting the manual experiment because control is done in real time.</dd></dl>
<p>We can utilize timers to control the experiment and perform other manual operations:</p>
<div class="fragment"><div class="line"><span class="comment">// stop the experiment after 25 seconds</span></div>
<div class="line">QTimer::singleShot(25000, [=,&amp;handler]() {</div>
<div class="line">    handler.stopExperiment(1);</div>
<div class="line">});</div>
</div><!-- fragment --><p>You can see all the manual operations in <a class="el" href="class_ais_instrument_handler.html">AisInstrumentHandler</a></p>
<p>Finally, we start the application:</p>
<div class="fragment"><div class="line">app.exec();</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
